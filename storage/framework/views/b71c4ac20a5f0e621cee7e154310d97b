<div class="form-group">
  <label for="designation">Present Designation  (*)</label>
  <?php echo Form::text('designation',NULL,['class'=>'form-control ', 'id'=>'designation']); ?>

</div>

<div class="form-group">
  <label for="service_status">Service Status in SRC  (Please tick*)</label>
  <div class="radio">
    <label><?php echo Form::radio('service_status', 1); ?> Confirmed</label>
    <label><?php echo Form::radio('service_status', 2); ?> Probation</label>
    <label><?php echo Form::radio('service_status', 3); ?> Part-Time</label>
  </div>
  <div id="service_status"></div>
</div>

<hr/>

<div class="form-group">
  <label for="select-course-type">Program Type</label>
  <?php echo Form::select('course_type_id',$course_type_list_array,'',array('id'=>'select-course-type','placeholder' => '-- Select Programme Type --','class' => 'form-control')); ?>

</div>

<div class="form-group">
  <label for="select-programme">Course</label>
  <?php echo Form::select('course-id',$course_list_array,'',array('id'=>'select-programme','placeholder' => '-- Select Programme --','class' => 'form-control')); ?>

  <?php echo Form::hidden('course_id','',array('id'=>'course_id')); ?>

  <?php echo Form::hidden('title','',array('id'=>'title')); ?>

</div>

<div class="form-group">
  <label for="date_required">Date and Time of Programme (*)</label>
  <?php echo Form::select('timetable-id',[],'',array('id' => 'select-timetable' ,'class' => 'form-control','disabled' => 'true','placeholder' => '-- Select Date and Time of Programme --')); ?>

  <?php echo Form::hidden('item_id[]','',array('id'=>'item_id')); ?>

  <?php echo Form::hidden('item_date[]','',array('id'=>'item_date')); ?>

  <?php echo Form::hidden('to_date[]','',array('id'=>'to_date')); ?>


</div>

<div class="form-group">
    <label for="provider">Lecturer:&nbsp;</label><span class="range_text" id="provider-text">-</span><?php echo Form::hidden('provider','',array('id'=>'provider')); ?>

</div>

<div class="form-group">
  <label for="type-training-text">Course Type:&nbsp;</label><span class="range_text" id="type-training-text">-</span><?php echo Form::hidden('type_training',-1,array('id'=>'type_training')); ?>

</div>

<div class="form-group">
   <label for="budget_availability_text">Budget Availability:&nbsp;</label><span class="range_text" id="budget_availability_text">-</span><?php echo Form::hidden('budget_availability',-1,array('id'=>'budget_availability')); ?>

</div>

<div class="form-group">
  <label for="isfunds-text">Funds or grant:&nbsp;</label><span class="range_text" id="isfunds-text">-</span><?php echo Form::hidden('isfunds',-1,array('id'=>'isfunds')); ?>

</div>

<div id="funds-section" class="form-group hide">
  <label for="funds-text">Amount of Funds / grant:&nbsp;</label><span class="range_text" id="funds-text">-</span><?php echo Form::hidden('funds',-1,array('id'=>'funds')); ?>

</div>

<div class="form-group">
  <label for="fee">Course Fee:&nbsp;</label><span class="range_text" id="fee-text">-</span><?php echo Form::hidden('fee',1,array('id'=>'fee')); ?>

</div>

<div class="form-group">
  <label for="description">Description:&nbsp;</label>
   <?php echo Form::textarea('description', '-', ['class' => 'ckeditor form-control','readonly' => 'true','id' => 'description']); ?>

</div>

<script type="text/javascript">
$(document).ready(function(){

$( "#select-course-type" ).change(function() {
  url = '/tes/course/get_json_course_by_course_type_id';
  data = { course_type_id: $( "#select-course-type" ).val()};

  var request = $.ajax({
      url: url,
      type: 'GET',
      data: data ,
      contentType: 'application/json; charset=utf-8'
  });

  request.done(function(data) {
    // your success code here
    var listitems ='<option value=-1>-- Select Programme --</option>';
    $.each(data, function(key, value){
      listitems += '<option value=' + value.id + '>' + value.name + '</option>';
    });

    $("#select-programme").html(listitems);

  });

  request.fail(function(jqXHR, textStatus) {
        // your failure code here
  });
});

$( "#select-programme" ).change(function() {
  url = '/tes/course/get_json_course';
  data = { course_id: $( "#select-programme" ).val()};


  $("#course_id").val($("#select-programme").val());
  $("#title").val($("#select-programme :selected").text());

  var request = $.ajax({
      url: url,
      type: 'GET',
      data: data ,
      contentType: 'application/json; charset=utf-8'
  });

  request.done(function(data) {
    // your success code here
    $( "#select-timetable" ).attr('disabled', false);
    var listitems ='<option value=-1>-- Select Date and Time of Programme --</option>';
    $.each(data.timetable, function(key, value){
      listitems += '<option data-fromdate='+ value.start_date +' data-todate='+ value.to_date +' value=' + value.id + '>From ' + value.start_date + ' to ' + value.end_date +'</option>';
    });

    $("#select-timetable").html(listitems);

    $("#provider-text").text(data['provider']);
    $("#provider").val(data['provider']);

    $("#fee-text").text(data['fee']);
    $("#fee").val(data['fee']);

    $("#isfunds").val(data['isfunds']);
    $("#funds").val(data['funds']);

    switch (data['isfunds']) {
      case 1:
          $("#isfunds-text").text('Yes');
          $("div#funds-section").removeClass("hide");
          $("#funds-text").text(data['funds']);
          break;
      case 2:
          $("#isfunds-text").text('No');
          $("div#funds-section").addClass("hide");
          $("#funds-text").text('-');
          break;
    }

    CKEDITOR.instances['description'].setData(data['description']);

    $("#type_training").val(data['course_type_id']);

    switch (data['course_type_id']) {
      case 1:
          $("#type-training-text").text('Core Training');
          break;
      case 2:
          $("#type-training-text").text('Functional');
          break;
      case 3:
          $("#type-training-text").text('Management / Leadership');
          break;
      case 4:
          $("#type-training-text").text('SRC Knowledge');
          break;
    }

    $("#budget_availability").val(data['budget_availability']);

    switch (data['budget_availability']) {
      case 1:
          $("#budget_availability_text").text('Confirmed that Budget is available for the course');
          break;
      case 2:
          $("#budget_availability_text").text('Insufficient Budget left');
          break;
    }

    $( "#select-timetable" ).change(function() {
      $("#item_id").val($("#select-timetable").val());
      $a = $("#item_date").val($("#select-timetable :selected").data('fromdate'));
      console.log($("#select-timetable :selected").data('fromdate'));
      $("#to_date").val($("#select-timetable :selected").data('todate'));
    });






  });

  request.fail(function(jqXHR, textStatus) {
        // your failure code here
  });
});

 });

</script>
